<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FuelFlux - Transaction Details</title>
    <style>
        /* 
        =============================
        GLOBAL RESET AND BASE STYLES
        =============================
        */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
        }
        
        /* 
        =============================
        HEADER STYLES
        =============================
        */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 30px;
            border-bottom: 1px solid #eaedf3;
            background-color: #fff;
        }
        
        /* Logo container styles */
        .logo-container {
            display: flex;
            align-items: center;
        }
        
        .logo {
            margin-right: 15px;
            position: relative;
        }
        
        .logo img {
            height: 60px;
            width: 60px;
            position: relative;
            top: 5px;
            left: -5px;
        }
        
        .page-title {
            font-size: 26px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        /* Header right section with back button */
        .header-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .back-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            background-color: #f0f2f5;
            color: #333;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .back-btn:hover {
            background-color: #e1e5eb;
        }
        
        /* 
        =============================
        MAIN CONTENT CONTAINER
        =============================
        */
        .main-content {
            padding: 30px;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        /* 
        =============================
        TRANSACTION CARD STYLES
        =============================
        */
        .transaction-card {
            background-color: #fff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.04);
            margin-bottom: 20px;
        }
        
        /* Transaction header with ID and status */
        .transaction-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            align-items: center;
        }
        
        .transaction-id {
            font-size: 24px;
            color: #6c757d;
        }
        
        .transaction-status {
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 16px;
            font-weight: 500;
        }
        
        /* Status label variations */
        .status-completed {
            background-color: #e8f5e9;
            color: #4CAF50;
        }
        
        .status-pending {
            background-color: #fff8e1;
            color: #ffc107;
        }
        
        .transaction-date {
            font-size: 18px;
            color: #6c757d;
            margin-bottom: 25px;
        }
        
        /* Transaction details grid layout */
        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .detail-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .detail-label {
            font-size: 14px;
            color: #6c757d;
        }
        
        .detail-value {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        /* Divider element */
        .divider {
            height: 1px;
            background-color: #eaedf3;
            margin: 25px 0;
        }
        
        /* Section heading */
        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        /* 
        =============================
        CUSTOMER AND PAYMENT INFO STYLES
        =============================
        */
        .customer-info, .payment-details {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
        }
        
        .info-column {
            flex: 1;
            min-width: 200px;
        }
        
        .info-group {
            margin-bottom: 15px;
        }
        
        .info-label {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 5px;
        }
        
        .info-value {
            font-size: 16px;
            color: #2c3e50;
        }
        
        /* 
        =============================
        ACTION BUTTONS STYLES
        =============================
        */
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: flex-end;
        }
        
        .action-btn {
            padding: 12px 25px;
            border-radius: 6px;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        /* Print button specific styling */
        .print-btn {
            background-color: #4A6FDC;
            color: white;
            border: none;
        }
        
        .print-btn:hover {
            background-color: #3A5CBC;
        }
        
        /* Download button specific styling */
        .download-btn {
            background-color: #4CAF50;
            color: white;
            border: none;
        }
        
        .download-btn:hover {
            background-color: #3d9140;
        }
        
        /* 
        =============================
        INVOICE SECTION STYLES
        =============================
        */
        .invoice-details {
            background-color: #fff;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.04);
        }
        
        /* Invoice header with company info and number */
        .invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }
        
        .company-info {
            display: flex;
            align-items: center;
        }
        
        .company-logo {
            width: 50px;
            height: 50px;
            margin-right: 15px;
        }
        
        .company-name {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        .invoice-meta {
            text-align: right;
        }
        
        .invoice-number {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .invoice-date {
            font-size: 14px;
            color: #6c757d;
        }
        
        /* Address section styles */
        .address-container {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .address-block {
            max-width: 250px;
        }
        
        .address-label {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .address-details {
            font-size: 14px;
            color: #2c3e50;
            line-height: 1.5;
        }
        
        /* Invoice table styles */
        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        
        .invoice-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            font-size: 14px;
            color: #6c757d;
            text-align: left;
            padding: 12px 15px;
            border-bottom: 1px solid #eaedf3;
        }
        
        .invoice-table td {
            padding: 15px;
            font-size: 14px;
            color: #2c3e50;
            border-bottom: 1px solid #eaedf3;
        }
        
        .invoice-table tr:last-child td {
            border-bottom: none;
        }
        
        /* Totals section styles */
        .totals-table {
            width: 350px;
            margin-left: auto;
        }
        
        .totals-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            font-size: 14px;
            color: #2c3e50;
        }
        
        .totals-row.final {
            font-weight: 600;
            font-size: 18px;
            padding-top: 15px;
            margin-top: 8px;
            border-top: 1px solid #eaedf3;
        }
        
        /* Invoice footer with notes */
        .invoice-notes {
            font-size: 14px;
            color: #6c757d;
            line-height: 1.5;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eaedf3;
        }
    </style>
</head>
<body>
    <!-- 
    =============================
    HEADER SECTION
    =============================
    -->
    <div class="header">
        <div class="logo-container">
            <div class="logo">
                <img src="assets/icons/fulefulx.png" alt="FuelFlux Logo">
            </div>
            <div class="page-title">Transaction Details</div>
        </div>
        <div class="header-right">
            <button class="back-btn" onclick="goBackToAdmin()">
                <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M15 8.25H5.8725L10.065 4.0575L9 3L3 9L9 15L10.0575 13.9425L5.8725 9.75H15V8.25Z" fill="#333333"/>
                </svg>
                Back to Dashboard
            </button>
        </div>
    </div>
    
    <!-- 
    =============================
    MAIN CONTENT SECTION
    =============================
    -->
    <div class="main-content">
        <!-- Transaction Details Card -->
        <div class="transaction-card">
            <!-- Transaction Header with ID and Status -->
            <div class="transaction-header">
                <span class="transaction-id" id="transaction-id">#TRX-98756</span>
                <span class="transaction-status status-completed" id="transaction-status">Completed</span>
            </div>
            <div class="transaction-date" id="transaction-date">May 13, 2025 - 10:45 AM</div>
            
            <!-- Transaction Details Grid -->
            <div class="details-grid">
                <div class="detail-group">
                    <div class="detail-label">Fuel Type</div>
                    <div class="detail-value" id="fuel-type">Petrol</div>
                </div>
                <div class="detail-group">
                    <div class="detail-label">Volume</div>
                    <div class="detail-value" id="volume">12.5 L</div>
                </div>
                <div class="detail-group">
                    <div class="detail-label">Unit Price</div>
                    <div class="detail-value" id="unit-price">₹95.00/L</div>
                </div>
                <div class="detail-group">
                    <div class="detail-label">Total Amount</div>
                    <div class="detail-value" id="total-amount">₹1,187.50</div>
                </div>
            </div>
            
            <div class="divider"></div>
            
            <!-- Customer Information Section -->
            <h3 class="section-title">Customer Information</h3>
            <div class="customer-info">
                <div class="info-column">
                    <div class="info-group">
                        <div class="info-label">Customer Name</div>
                        <div class="info-value" id="customer-name">Rahul Mehta</div>
                    </div>
                    <div class="info-group">
                        <div class="info-label">Phone Number</div>
                        <div class="info-value" id="customer-phone">+91 9876543210</div>
                    </div>
                </div>
                <div class="info-column">
                    <div class="info-group">
                        <div class="info-label">Vehicle Number</div>
                        <div class="info-value" id="vehicle-number">GJ-01-AB-1234</div>
                    </div>
                    <div class="info-group">
                        <div class="info-label">Vehicle Type</div>
                        <div class="info-value" id="vehicle-type">Car - Sedan</div>
                    </div>
                </div>
            </div>
            
            <div class="divider"></div>
            
            <!-- Payment Details Section -->
            <h3 class="section-title">Payment Details</h3>
            <div class="payment-details">
                <div class="info-column">
                    <div class="info-group">
                        <div class="info-label">Payment Method</div>
                        <div class="info-value" id="payment-method">Credit Card</div>
                    </div>
                    <div class="info-group">
                        <div class="info-label">Card Number</div>
                        <div class="info-value" id="card-number">**** **** **** 1234</div>
                    </div>
                </div>
                <div class="info-column">
                    <div class="info-group">
                        <div class="info-label">Bank Reference</div>
                        <div class="info-value" id="bank-reference">REF123456789</div>
                    </div>
                    <div class="info-group">
                        <div class="info-label">Payment Status</div>
                        <div class="info-value" id="payment-status">Paid</div>
                    </div>
                </div>
            </div>
            
            <!-- Action Buttons Section -->
            <div class="action-buttons">
                <button class="action-btn print-btn" onclick="printInvoice()">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.625 5.25H3.375C2.34 5.25 1.5 6.09 1.5 7.125V12.375H3.75V15.75H14.25V12.375H16.5V7.125C16.5 6.09 15.66 5.25 14.625 5.25ZM12.75 14.25H5.25V10.5H12.75V14.25ZM14.625 8.625C14.2125 8.625 13.875 8.2875 13.875 7.875C13.875 7.4625 14.2125 7.125 14.625 7.125C15.0375 7.125 15.375 7.4625 15.375 7.875C15.375 8.2875 15.0375 8.625 14.625 8.625ZM15 2.25H3V4.5H15V2.25Z" fill="white"/>
                    </svg>
                    Print Invoice
                </button>
                <button class="action-btn download-btn" onclick="downloadInvoice()">
                    <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M14.25 6.75H11.25V2.25H6.75V6.75H3.75L9 12L14.25 6.75ZM3.75 13.5V15H14.25V13.5H3.75Z" fill="white"/>
                    </svg>
                    Download PDF
                </button>
            </div>
        </div>
        
        <!-- 
        =============================
        INVOICE SECTION 
        =============================
        -->
        <div class="invoice-details" id="invoice-section">
            <!-- Invoice Header with Company Info -->
            <div class="invoice-header">
                <div class="company-info">
                    <div class="company-logo">
                        <img src="assets/icons/fulefulx.png" alt="FuelFlux Logo" width="50" height="50">
                    </div>
                    <div class="company-name">FuelFlux Petrol Pump</div>
                </div>
                <div class="invoice-meta">
                    <div class="invoice-number">Invoice #INV-98756</div>
                    <div class="invoice-date">Date: May 13, 2025</div>
                </div>
            </div>
            
            <!-- Address Section -->
            <div class="address-container">
                <div class="address-block">
                    <div class="address-label">Pump Address:</div>
                    <div class="address-details">
                        FuelFlux Station #3<br>
                        123 Main Road, Sector 18<br>
                        Mumbai, Maharashtra 400001<br>
                        India
                    </div>
                </div>
                <div class="address-block">
                    <div class="address-label">Bill To:</div>
                    <div class="address-details" id="invoice-customer">
                        Rahul Mehta<br>
                        Phone: +91 9876543210<br>
                        Vehicle: GJ-01-AB-1234
                    </div>
                </div>
            </div>
            
            <!-- Invoice Items Table -->
            <table class="invoice-table">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Unit Price</th>
                        <th>Quantity</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="invoice-item">
                        <td>Petrol</td>
                        <td>₹95.00/L</td>
                        <td>12.5 L</td>
                        <td>₹1,187.50</td>
                    </tr>
                </tbody>
            </table>
            
            <!-- Invoice Totals Section -->
            <div class="totals-table">
                <div class="totals-row">
                    <div>Subtotal:</div>
                    <div id="invoice-subtotal">₹1,187.50</div>
                </div>
                <div class="totals-row">
                    <div>GST (18%):</div>
                    <div id="invoice-tax">₹213.75</div>
                </div>
                <div class="totals-row final">
                    <div>Total:</div>
                    <div id="invoice-total">₹1,401.25</div>
                </div>
            </div>
            
            <!-- Invoice Notes Section -->
            <div class="invoice-notes">
                <strong>Notes:</strong>
                <p>Thank you for your business! This serves as an official receipt for your fuel purchase.</p>
            </div>
        </div>
    </div>
    
    <script>
        /**
         * Navigation Function
         * Returns user to the admin dashboard when the back button is clicked
         */
        function goBackToAdmin() {
            window.location.href = "admin.html";
        }
        
        /**
         * Sample Transaction Data
         * In a real application, this data would be fetched from a database or API
         * Each transaction object contains complete details about the transaction
         */
        const transactions = {
            'TRX-98756': {
                id: '#TRX-98756',
                date: 'May 13, 2025 - 10:45 AM',
                status: 'Completed',
                fuelType: 'Petrol',
                volume: '12.5 L',
                unitPrice: '₹95.00/L',
                amount: '₹1,187.50',
                subtotal: '₹1,187.50',
                tax: '₹213.75',
                total: '₹1,401.25',
                customer: {
                    name: 'Rahul Mehta',
                    phone: '+91 9876543210',
                    vehicle: {
                        number: 'GJ-01-AB-1234',
                        type: 'Car - Sedan'
                    }
                },
                payment: {
                    method: 'Credit Card',
                    cardNumber: '**** **** **** 1234',
                    reference: 'REF123456789',
                    status: 'Paid'
                }
            },
            'TRX-98755': {
                id: '#TRX-98755',
                date: 'May 13, 2025 - 09:30 AM',
                status: 'Completed',
                fuelType: 'Diesel',
                volume: '18.2 L',
                unitPrice: '₹88.00/L',
                amount: '₹1,601.60',
                subtotal: '₹1,601.60',
                tax: '₹288.29',
                total: '₹1,889.89',
                customer: {
                    name: 'Priya Sharma',
                    phone: '+91 9887654321',
                    vehicle: {
                        number: 'GJ-01-CD-5678',
                        type: 'SUV'
                    }
                },
                payment: {
                    method: 'UPI',
                    cardNumber: 'N/A',
                    reference: 'UPI123456789',
                    status: 'Paid'
                }
            }
        };
        
        /**
         * Load Transaction Data Function
         * Gets transaction ID from URL parameters
         * Populates the page with corresponding transaction details
         * Shows error message if transaction is not found
         */
        function loadTransactionData() {
            // Extract transaction ID from URL query parameters
            const urlParams = new URLSearchParams(window.location.search);
            const transactionId = urlParams.get('id');
            
            // Check if transaction exists in our data
            if (transactionId && transactions[transactionId.replace('#', '')]) {
                const transaction = transactions[transactionId.replace('#', '')];
                
                // Set transaction details in the UI
                document.getElementById('transaction-id').textContent = transaction.id;
                document.getElementById('transaction-date').textContent = transaction.date;
                document.getElementById('fuel-type').textContent = transaction.fuelType;
                document.getElementById('volume').textContent = transaction.volume;
                document.getElementById('unit-price').textContent = transaction.unitPrice;
                document.getElementById('total-amount').textContent = transaction.amount;
                
                // Set status with the appropriate CSS class
                const statusElement = document.getElementById('transaction-status');
                statusElement.textContent = transaction.status;
                if (transaction.status === 'Completed') {
                    statusElement.className = 'transaction-status status-completed';
                } else {
                    statusElement.className = 'transaction-status status-pending';
                }
                
                // Set customer information
                document.getElementById('customer-name').textContent = transaction.customer.name;
                document.getElementById('customer-phone').textContent = transaction.customer.phone;
                document.getElementById('vehicle-number').textContent = transaction.customer.vehicle.number;
                document.getElementById('vehicle-type').textContent = transaction.customer.vehicle.type;
                
                // Set payment details
                document.getElementById('payment-method').textContent = transaction.payment.method;
                document.getElementById('card-number').textContent = transaction.payment.cardNumber;
                document.getElementById('bank-reference').textContent = transaction.payment.reference;
                document.getElementById('payment-status').textContent = transaction.payment.status;
                
                // Set invoice details - customer section
                document.getElementById('invoice-customer').innerHTML = `
                    ${transaction.customer.name}<br>
                    Phone: ${transaction.customer.phone}<br>
                    Vehicle: ${transaction.customer.vehicle.number}
                `;
                
                // Set invoice details - item row
                document.getElementById('invoice-item').innerHTML = `
                    <td>${transaction.fuelType}</td>
                    <td>${transaction.unitPrice}</td>
                    <td>${transaction.volume}</td>
                    <td>${transaction.amount}</td>
                `;
                
                // Set invoice details - totals
                document.getElementById('invoice-subtotal').textContent = transaction.subtotal;
                document.getElementById('invoice-tax').textContent = transaction.tax;
                document.getElementById('invoice-total').textContent = transaction.total;
            } else {
                // If no transaction data is found, show an error message
                document.querySelector('.main-content').innerHTML = `
                    <div class="transaction-card">
                        <h2 style="font-size: 24px; font-weight: 600; color: #2c3e50; margin-bottom: 15px;">Transaction Not Found</h2>
                        <p>The transaction you're looking for doesn't exist or has been removed.</p>
                        <button class="back-btn" onclick="goBackToAdmin()" style="margin-top: 20px;">
                            <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M15 8.25H5.8725L10.065 4.0575L9 3L3 9L9 15L10.0575 13.9425L5.8725 9.75H15V8.25Z" fill="#333333"/>
                            </svg>
                            Back to Dashboard
                        </button>
                    </div>
                `;
            }
        }
        
        /**
         * Print Invoice Function
         * Creates a new printable window with the invoice content
         * Adds necessary print styling
         * Triggers the browser's print dialog
         */
        function printInvoice() {
            // Create a printable version
            const printContent = document.getElementById('invoice-section').outerHTML;
            const printWindow = window.open('', '_blank');
            
            // Write print-optimized HTML to the new window
            printWindow.document.write(`
                <html>
                <head>
                    <title>Invoice</title>
                    <style>
                        * {
                            margin: 0;
                            padding: 0;
                            box-sizing: border-box;
                            font-family: Arial, sans-serif;
                        }
                        body {
                            padding: 30px;
                        }
                        .invoice-header {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 25px;
                        }
                        .company-info {
                            display: flex;
                            align-items: center;
                        }
                        .company-logo {
                            width: 50px;
                            height: 50px;
                            margin-right: 15px;
                        }
                        .company-name {
                            font-size: 24px;
                            font-weight: bold;
                        }
                        .invoice-meta {
                            text-align: right;
                        }
                        .invoice-number {
                            font-size: 18px;
                            font-weight: bold;
                            margin-bottom: 5px;
                        }
                        .invoice-date {
                            font-size: 14px;
                            color: #666;
                        }
                        .address-container {
                            display: flex;
                            justify-content: space-between;
                            margin-bottom: 30px;
                        }
                        .address-block {
                            max-width: 250px;
                        }
                        .address-label {
                            font-size: 14px;
                            color: #666;
                            margin-bottom: 5px;
                            font-weight: bold;
                        }
                        .address-details {
                            font-size: 14px;
                            line-height: 1.5;
                        }
                        .invoice-table {
                            width: 100%;
                            border-collapse: collapse;
                            margin-bottom: 30px;
                        }
                        .invoice-table th {
                            background-color: #f8f9fa;
                            font-weight: bold;
                            font-size: 14px;
                            text-align: left;
                            padding: 12px 15px;
                            border-bottom: 1px solid #ddd;
                        }
                        .invoice-table td {
                            padding: 15px;
                            font-size: 14px;
                            border-bottom: 1px solid #ddd;
                        }
                        .totals-table {
                            width: 350px;
                            margin-left: auto;
                        }
                        .totals-row {
                            display: flex;
                            justify-content: space-between;
                            padding: 10px 0;
                            font-size: 14px;
                        }
                        .totals-row.final {
                            font-weight: bold;
                            font-size: 18px;
                            padding-top: 15px;
                            margin-top: 8px;
                            border-top: 1px solid #ddd;
                        }
                        .invoice-notes {
                            font-size: 14px;
                            color: #666;
                            line-height: 1.5;
                            margin-top: 30px;
                            padding-top: 20px;
                            border-top: 1px solid #ddd;
                        }
                    </style>
                </head>
                <body>
                    ${printContent}
                </body>
                </html>
            `);
            
            // Close the document writing and prepare for printing
            printWindow.document.close();
            printWindow.focus();
            
            // Print after a short delay to ensure content is loaded
            setTimeout(() => {
                printWindow.print();
            }, 500);
        }
        
        /**
         * Download Invoice Function
         * In a real application, this would generate a PDF file for download
         * Currently shows an alert explaining the functionality
         */
        function downloadInvoice() {
            // In a real app, this would generate a PDF for download
            alert('PDF download functionality would be implemented here. This would typically use a library like jsPDF or make a server request to generate the PDF.');
        }
        
        /**
         * Initialize the page when DOM content is loaded
         * Loads transaction data and populates the UI
         */
        document.addEventListener('DOMContentLoaded', loadTransactionData);
    </script>
</body>
</html> 